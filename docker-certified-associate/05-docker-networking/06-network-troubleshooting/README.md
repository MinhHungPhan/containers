# Docker Network Troubleshooting

Welcome to this comprehensive guide on network troubleshooting with Docker. In this tutorial, we will focus on some tools and techniques that you can utilize to troubleshoot networking issues within your Docker setup. Although primarily focused on Docker, some of these techniques are also applicable for general troubleshooting.

## Table of Contents

- [Introduction](#introduction)
- [Accessing Logs](#accessing-logs)
- [Network Troubleshooting](#network-troubleshooting)
- [Using Netshoot for Network Troubleshooting](#using-netshoot-for-network-troubleshooting)
- [Relevant Documentation](#relevant-documentation)
- [Conclusion](#conclusion)

## Introduction

Docker provides powerful features for implementing a container networking setup tailored to your needs. However, like any complex system, you may encounter issues that require troubleshooting. This tutorial will guide you through some basic techniques and tools to diagnose and resolve these issues.

## Accessing Logs

Logs are a vital resource when troubleshooting issues, providing valuable information about your system's operations. There are primarily three types of logs you may want to examine:

1. **Container Logs**: These logs are generated by the containers themselves and reside inside them. To access these logs, use the `docker logs` command followed by the container name.

For instance, create a simple log generating container named `log-container`:

```bash
docker run --name log-container busybox echo "Here is my container log!"
```

To access these logs, use:

```bash
docker logs log-container
```

2. **Service Logs**: To access the logs for a service, use the `docker service logs` command followed by the service name.

Example:

```bash
docker service create --name log-svc --replicas 3 -p 8080:80 nginx
```

To access these logs, use:

```bash
docker service logs log-svc
```

3. **Docker Daemon Logs**: When Docker daemon encounters connection or communication problems, these logs are essential for understanding the issue.

To access these logs, use:

```bash
sudo journalctl -u docker
```

## Network Troubleshooting

A great way to troubleshoot network issues is to run a container within the context of a Docker Network. You can use it to test connectivity and gather information.

## Using Netshoot for Network Troubleshooting

Sometimes, logs may not provide enough information, and you'll need to interact with your internal networking components directly to determine the issue. One extremely useful tool for this is Netshoot.

Netshoot is a container image packed with typical network troubleshooting software like curl, netstat, ping, nslookup, etc. Let's see how you can use this tool for troubleshooting by creating a custom network and attaching it to the Netshoot container for troubleshooting.

1. To use Netshoot, first, create a custom network and run a container attached to it:

```bash
docker network create custom-net
docker run -d --name custom-net-nginx --network custom-net nginx
```

2. Now, run the Netshoot container on the same network to test the network components:

```bash
docker run --rm --network custom-net nicolaka/netshoot curl custom-net-nginx:80
```

3. You can even inject the Netshoot container into another container's network sandbox for even more comprehensive troubleshooting:

```bash
docker run --rm --network container:custom-net-nginx nicolaka/netshoot curl localhost:80
```

4. You can even use this technique with a container that uses the none network:

```bash
docker run -d --name none-net-nginx --network none nginx
docker run --rm --network container:none-net-nginx nicolaka/netshoot curl localhost:80
```

## Relevant Documentation

- [View logs for a container or service](https://docs.docker.com/config/containers/logging/)
- [Nicolaka/netshoot](https://github.com/nicolaka/netshoot)
- [How to Use Journalctl Command in Linux](https://www.tecmint.com/use-journalctl-command-in-linux/)

## Conclusion

In this tutorial, we have discussed some essential techniques for network troubleshooting in Docker, including how to access logs and use the Netshoot container for testing. Combining these strategies can lead to powerful insights and solutions for network issues in your Docker setup.